# 简历系统 API 接口文档

## 1. 接口规范

### 1.1 基本信息
- **基础路径**: `/api/resume`
- **认证方式**: Bearer Token（复用 pig-auth）
- **Content-Type**: application/json
- **响应格式**: JSON

### 1.2 统一响应格式

```json
{
  "code": 0,
  "msg": "success",
  "data": { }
}
```

### 1.3 错误码定义

| 错误码 | 说明 |
|--------|------|
| 0 | 成功 |
| 40001 | 参数错误 |
| 40002 | 简历不存在 |
| 40003 | 无权限操作 |
| 40004 | 模板不存在 |
| 50001 | 系统错误 |

---

## 2. 简历管理

### 2.1 获取简历列表

**接口**: `GET /api/resume/resume`

**参数**:
| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| page | int | 否 | 页码，默认1 |
| size | int | 否 | 每页条数，默认10 |
| status | char | 否 | 简历状态 0-草稿 1-已完成 |
| keyword | string | 否 | 搜索关键词（简历标题） |

**响应**:
```json
{
  "code": 0,
  "msg": "success",
  "data": {
    "total": 100,
    "records": [
      {
        "id": 1,
        "title": "我的简历",
        "templateName": "简洁风格",
        "fullName": "张三",
        "expectedPosition": "Java开发工程师",
        "isDefault": "0",
        "status": "1",
        "viewCount": 10,
        "updateTime": "2024-01-01 12:00:00"
      }
    ]
  }
}
```

---

### 2.2 获取简历详情

**接口**: `GET /api/resume/resume/{id}`

**响应**:
```json
{
  "code": 0,
  "msg": "success",
  "data": {
    "id": 1,
    "userId": 100,
    "title": "我的简历",
    "templateId": 1,
    "avatar": "https://xxx.com/avatar.png",
    "fullName": "张三",
    "gender": "0",
    "birthDate": "1990-01-01",
    "phone": "13800138000",
    "email": "zhangsan@example.com",
    "location": "北京市",
    "summary": "5年Java开发经验...",
    "expectedPosition": "Java开发工程师",
    "expectedSalary": "30K-50K",
    "status": "1",
    "isDefault": "0",
    "educations": [ ],
    "works": [ ],
    "projects": [ ],
    "skills": [ ],
    "certs": [ ],
    "portfolios": [ ],
    "updateTime": "2024-01-01 12:00:00"
  }
}
```

---

### 2.3 创建简历

**接口**: `POST /api/resume/resume`

**请求体**:
```json
{
  "title": "我的简历",
  "templateId": 1,
  "fullName": "张三",
  "phone": "13800138000",
  "email": "zhangsan@example.com"
}
```

**响应**:
```json
{
  "code": 0,
  "msg": "success",
  "data": {
    "id": 1,
    "title": "我的简历"
  }
}
```

---

### 2.4 更新简历

**接口**: `PUT /api/resume/resume/{id}`

**请求体**: 同创建

**响应**: `{ "code": 0, "msg": "success" }`

---

### 2.5 删除简历

**接口**: `DELETE /api/resume/resume/{id}`

**响应**: `{ "code": 0, "msg": "success" }`

---

### 2.6 复制简历

**接口**: `POST /api/resume/resume/{id}/copy`

**响应**:
```json
{
  "code": 0,
  "msg": "success",
  "data": {
    "id": 2,
    "title": "我的简历_副本"
  }
}
```

---

### 2.7 设置默认简历

**接口**: `PUT /api/resume/resume/{id}/default`

**响应**: `{ "code": 0, "msg": "success" }`

---

## 3. 教育经历

### 3.1 获取教育经历列表

**接口**: `GET /api/resume/resume/{resumeId}/education`

**响应**:
```json
{
  "code": 0,
  "msg": "success",
  "data": [
    {
      "id": 1,
      "schoolName": "北京大学",
      "degree": "2",
      "major": "计算机科学与技术",
      "startDate": "2010-09-01",
      "endDate": "2014-07-01",
      "description": "在校期间..."
    }
  ]
}
```

---

### 3.2 新增教育经历

**接口**: `POST /api/resume/resume/{resumeId}/education`

**请求体**:
```json
{
  "schoolName": "北京大学",
  "degree": "2",
  "major": "计算机科学与技术",
  "startDate": "2010-09-01",
  "endDate": "2014-07-01",
  "description": "在校期间..."
}
```

---

### 3.3 更新教育经历

**接口**: `PUT /api/resume/resume/{resumeId}/education/{id}`

---

### 3.4 删除教育经历

**接口**: `DELETE /api/resume/resume/{resumeId}/education/{id}`

---

## 4. 工作经历

### 4.1 获取工作经历列表

**接口**: `GET /api/resume/resume/{resumeId}/work`

---

### 4.2 新增工作经历

**接口**: `POST /api/resume/resume/{resumeId}/work`

**请求体**:
```json
{
  "companyName": "字节跳动",
  "department": "技术部",
  "position": "高级Java工程师",
  "startDate": "2018-07-01",
  "endDate": "2023-01-01",
  "isCurrent": "0",
  "workContent": "负责XXX系统开发...",
  "achievements": "提升了系统性能..."
}
```

---

### 4.3 更新/删除工作经历

**接口**: `PUT /api/resume/resume/{resumeId}/work/{id}`
**接口**: `DELETE /api/resume/resume/{resumeId}/work/{id}`

---

## 5. 项目经历

### 5.1 获取项目经历列表

**接口**: `GET /api/resume/resume/{resumeId}/project`

---

### 5.2 新增项目经历

**接口**: `POST /api/resume/resume/{resumeId}/project`

**请求体**:
```json
{
  "projectName": "电商平台重构",
  "role": "技术负责人",
  "companyName": "字节跳动",
  "startDate": "2020-01-01",
  "endDate": "2021-12-01",
  "description": "负责电商平台重构项目...",
  "responsibilities": "负责技术方案设计...",
  "technologies": "Java, Spring Cloud, MySQL"
}
```

---

### 5.3 更新/删除项目经历

**接口**: `PUT /api/resume/resume/{resumeId}/project/{id}`
**接口**: `DELETE /api/resume/resume/{resumeId}/project/{id}`

---

## 6. 专业技能

### 6.1 获取技能列表

**接口**: `GET /api/resume/resume/{resumeId}/skill`

---

### 6.2 新增技能

**接口**: `POST /api/resume/resume/{resumeId}/skill`

**请求体**:
```json
{
  "skillName": "Java",
  "proficiency": "2",
  "category": "后端开发",
  "description": "5年开发经验"
}
```

---

### 6.3 批量保存技能

**接口**: `POST /api/resume/resume/{resumeId}/skill/batch`

**请求体**:
```json
{
  "skills": [
    { "skillName": "Java", "proficiency": "2" },
    { "skillName": "Python", "proficiency": "1" }
  ]
}
```

---

### 6.4 更新/删除技能

**接口**: `PUT /api/resume/resume/{resumeId}/skill/{id}`
**接口**: `DELETE /api/resume/resume/{resumeId}/skill/{id}`

---

## 7. 证书资质

### 7.1 获取证书列表

**接口**: `GET /api/resume/resume/{resumeId}/cert`

---

### 7.2 新增证书

**接口**: `POST /api/resume/resume/{resumeId}/cert`

**请求体**:
```json
{
  "certName": "PMP项目管理师",
  "issuingAgency": "PMI",
  "issueDate": "2020-05-01",
  "expiryDate": "2023-05-01",
  "certCode": "123456"
}
```

---

### 7.3 更新/删除证书

**接口**: `PUT /api/resume/resume/{resumeId}/cert/{id}`
**接口**: `DELETE /api/resume/resume/{resumeId}/cert/{id}`

---

## 8. 作品集

### 8.1 获取作品列表

**接口**: `GET /api/resume/resume/{resumeId}/portfolio`

---

### 8.2 新增作品

**接口**: `POST /api/resume/resume/{resumeId}/portfolio`

**请求体**:
```json
{
  "title": "个人博客",
  "description": "基于Vue的个人博客",
  "linkUrl": "https://blog.example.com",
  "coverImage": "https://xxx.com/blog.png"
}
```

---

### 8.3 更新/删除作品

**接口**: `PUT /api/resume/resume/{resumeId}/portfolio/{id}`
**接口**: `DELETE /api/resume/resume/{resumeId}/portfolio/{id}`

---

## 9. 简历模板

### 9.1 获取模板列表

**接口**: `GET /api/resume/template`

**参数**:
| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| category | string | 否 | 模板分类 |
| page | int | 否 | 页码 |
| size | int | 否 | 每页条数 |

**响应**:
```json
{
  "code": 0,
  "msg": "success",
  "data": {
    "total": 5,
    "records": [
      {
        "id": 1,
        "name": "简洁风格",
        "code": "simple",
        "description": "简洁大方的简历模板",
        "thumbnail": "https://xxx.com/simple.png",
        "category": "common",
        "isActive": "1"
      }
    ]
  }
}
```

---

### 9.2 获取模板详情

**接口**: `GET /api/resume/template/{id}`

**响应**:
```json
{
  "code": 0,
  "msg": "success",
  "data": {
    "id": 1,
    "name": "简洁风格",
    "code": "simple",
    "description": "简洁大方的简历模板",
    "thumbnail": "https://xxx.com/simple.png",
    "previewHtml": "<div>...</div>",
    "configJson": "{...}",
    "category": "common"
  }
}
```

---

### 9.3 应用模板

**接口**: `PUT /api/resume/resume/{id}/template/{templateId}`

**响应**: `{ "code": 0, "msg": "success" }`

---

## 10. 简历导出

### 10.1 导出 PDF

**接口**: `POST /api/resume/resume/{id}/export/pdf`

**响应**: 文件流（PDF格式）

**请求头**: `Accept: application/octet-stream`

---

### 10.2 导出 HTML

**接口**: `POST /api/resume/resume/{id}/export/html`

**响应**: 文件流（HTML格式）

---

### 10.3 导出 JSON

**接口**: `POST /api/resume/resume/{id}/export/json`

**响应**:
```json
{
  "code": 0,
  "msg": "success",
  "data": {
    "downloadUrl": "https://xxx.com/download/xxx.json"
  }
}
```

---

## 11. 简历预览

### 11.1 获取简历预览HTML

**接口**: `GET /api/resume/resume/{id}/preview`

**响应**:
```json
{
  "code": 0,
  "msg": "success",
  "data": {
    "html": "<!DOCTYPE html><html>...</html>",
    "css": ".resume { ... }"
  }
}
```

---

## 12. 字典接口

### 12.1 获取学历列表

**接口**: `GET /api/resume/dict/degree`

**响应**:
```json
{
  "code": 0,
  "msg": "success",
  "data": [
    { "value": "0", "label": "高中" },
    { "value": "1", "label": "大专" },
    { "value": "2", "label": "本科" },
    { "value": "3", "label": "硕士" },
    { "value": "4", "label": "博士" }
  ]
}
```

---

### 12.2 获取熟练度列表

**接口**: `GET /api/resume/dict/proficiency`

**响应**:
```json
{
  "code": 0,
  "msg": "success",
  "data": [
    { "value": "0", "label": "了解" },
    { "value": "1", "label": "熟悉" },
    { "value": "2", "label": "精通" }
  ]
}
```

---

### 12.3 获取简历状态列表

**接口**: `GET /api/resume/dict/status`

**响应**:
```json
{
  "code": 0,
  "msg": "success",
  "data": [
    { "value": "0", "label": "草稿" },
    { "value": "1", "label": "已完成" }
  ]
}
```
